!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@angular/fire/firestore"),require("rxjs/operators"),require("@angular/fire")):"function"==typeof define&&define.amd?define("@takwin-core/tk-firebase",["exports","@angular/core","@angular/fire/firestore","rxjs/operators","@angular/fire"],r):r(((e="undefined"!=typeof globalThis?globalThis:e||self)["takwin-core"]=e["takwin-core"]||{},e["takwin-core"]["tk-firebase"]={}),e.ng.core,e.ng.fire.firestore,e.rxjs.operators,e.ng.fire)}(this,(function(e,r,t,o,n){"use strict";function i(e){return JSON.parse(JSON.stringify(e))}var a=function(){function e(e){this.firestore=e}return e.prototype.doc$=function(e){return this.firestore.doc(this.basePath+"/"+e).snapshotChanges().pipe(o.map((function(e){if(e.payload.exists){var r=e.payload.data(),t=e.payload.id;return Object.assign({id:t},r)}})))},e.prototype.collection$=function(e){return this.firestore.collection(""+this.basePath,e).snapshotChanges().pipe(o.map((function(e){return e.map((function(e){var r=e.payload.doc.data();return r.id=e.payload.doc.id,r}))})))},e.prototype.add=function(e,r){var t=this;return new Promise((function(o,n){r?t.firestore.collection(t.basePath).doc(r).set(i(e)).then((function(r){o(e)})):t.firestore.collection(t.basePath).add(i(e)).then((function(r){var t=Object.assign({id:r.id},e);o(t)}))}))},e.prototype.update=function(e){var r=this;return new Promise((function(t,o){r.firestore.collection(r.basePath).doc(e.id).set(i(e)).then((function(){t(Object.assign({},e))}))}))},e.prototype.delete=function(e){var r=this;return new Promise((function(t,o){r.firestore.collection(r.basePath).doc(e).delete().then((function(){t()}))}))},e}();a.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new a(r.ɵɵinject(t.AngularFirestore))},token:a,providedIn:"root"}),a.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[{type:t.AngularFirestore,decorators:[{type:r.Inject,args:[t.AngularFirestore]}]}]};var s=function(){};s.decorators=[{type:r.NgModule,args:[{declarations:[],imports:[t.AngularFirestoreModule],exports:[n.AngularFireModule,t.AngularFirestoreModule]}]}],e.TkFirebaseModule=s,e.TkFirebaseService=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=takwin-core-tk-firebase.umd.min.js.map